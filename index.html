<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AimForge — Performance Insights (EU Demo)</title>
  <style>
    :root{
      --bg0:#0f1115;
      --bg1:#121622;
      --card:#171a21;
      --card2:#1d2230;
      --stroke:rgba(255,255,255,.08);
      --text:#e6e9ef;
      --muted:#9aa3b2;
      --accent:#ff4655; /* use sparingly */
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background: radial-gradient(1200px 700px at 20% 0%, rgba(255,70,85,.06), transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
    }
    a{color:inherit;text-decoration:none}
    .wrap{width:min(1100px, 92vw); margin: 22px auto 70px;}
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding: 14px 14px;
      border:1px solid var(--stroke); border-radius: var(--radius);
      background: rgba(23,26,33,.72);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .brand{display:flex; align-items:center; gap:12px;}
    .mark{
      width:34px; height:34px; border-radius: 12px;
      background: var(--accent);
      box-shadow: 0 10px 30px rgba(255,70,85,.18);
    }
    .brand .name{font-weight:800; letter-spacing:.2px}
    .brand .sub{font-size:12px; color:var(--muted); margin-top:2px}
    .nav{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center;
      font-size:13px; color:var(--muted);
    }
    .nav a{
      padding:8px 10px; border-radius: 12px;
      border:1px solid transparent;
    }
    .nav a:hover{border-color: var(--stroke); color:var(--text); background: rgba(255,255,255,.03)}
    .btn{
      padding:9px 12px; border-radius: 12px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: var(--text);
      font-size:13px;
    }
    .btn:hover{background: rgba(255,255,255,.06)}
    .btn.primary{
      border-color: rgba(255,70,85,.25);
      background: rgba(255,70,85,.10);
    }

    .hero{margin: 22px 2px 14px; display:flex; justify-content:space-between; gap:16px; flex-wrap:wrap; align-items:flex-end;}
    h1{margin:0; font-size:32px; letter-spacing:.2px}
    .lead{margin:8px 0 0; color: var(--muted); line-height: 1.55; max-width: 72ch;}
    .metaRow{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px;}
    .chip{
      font-size:12px; color: var(--muted);
      padding:6px 10px; border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.03);
    }
    .grid{
      display:grid; grid-template-columns: 1fr 1fr 1fr;
      gap:12px; margin: 14px 0;
    }
    @media (max-width: 940px){ .grid{grid-template-columns:1fr} }
    .card{
      background: rgba(23,26,33,.72);
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 14px 14px;
    }
    .klabel{font-size:12px; color: var(--muted); text-transform:uppercase; letter-spacing:.12em}
    .kval{margin-top:8px; font-size:22px; font-weight:800}
    .kval.accent{color: var(--accent)}
    .kdesc{margin-top:8px; color: var(--muted); font-size:13px; line-height:1.5}

    .sectionTitle{margin: 18px 2px 10px; display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; align-items:center}
    .sectionTitle h2{margin:0; font-size:16px; letter-spacing:.2px}
    .sectionTitle .small{color: var(--muted); font-size:13px}

    .controls{
      display:flex; gap:10px; flex-wrap:wrap;
      padding: 12px;
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      background: rgba(23,26,33,.72);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .search{
      flex: 1 1 260px;
      display:flex; align-items:center; gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.03);
    }
    .search input{
      width:100%; border:0; outline:none; background:transparent;
      color: var(--text); font-size: 14px;
    }
    .search input::placeholder{color: rgba(154,163,178,.8)}
    .tablewrap{
      margin-top: 10px;
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      overflow:auto;
      background: rgba(23,26,33,.72);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    table{width:100%; border-collapse: collapse; min-width: 820px;}
    thead th{
      text-align:left;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color: var(--muted);
      padding: 14px 16px;
      background: rgba(255,255,255,.02);
      position: sticky;
      top:0;
    }
    tbody td{
      padding: 14px 16px;
      border-top: 1px solid rgba(255,255,255,.06);
      font-size: 14px;
      color: rgba(230,233,239,.92);
      white-space: nowrap;
    }
    tbody tr:hover{background: rgba(255,255,255,.03)}
    .right{text-align:right}
    .mono{font-variant-numeric: tabular-nums; font-feature-settings:"tnum" 1;}
    .gsi{font-weight:800; color: var(--accent)}
    .footer{
      margin-top: 14px;
      color: rgba(154,163,178,.85);
      font-size: 12px;
      line-height: 1.55;
      padding: 0 4px;
    }
    .footer a{color: rgba(230,233,239,.9); border-bottom:1px solid rgba(255,255,255,.18)}
    code{background: rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.10); padding:2px 6px; border-radius: 8px}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="mark"></div>
        <div>
          <div class="name">AimForge</div>
          <div class="sub">Performance Insights • EU Demo</div>
        </div>
      </div>

      <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
        <div class="nav">
          <a href="./index.html">Demo</a>
          <a href="./community.html">Community Ladder (EU)</a>
          <a href="./dashboard.html">My Stats (Login)</a>
        </div>
        <a class="btn primary" href="./dashboard.html">Login</a>
      </div>
    </div>

    <div class="hero">
      <div>
        <h1>Performance Insights (EU Demo)</h1>
        <p class="lead">
          Demo uses official Act leaderboard data. AimForge provides read-only analytics and coaching.
          Any rankings are community-based and opt-in only — not an alternative to Riot’s official ranked ladder.
        </p>
        <div class="metaRow">
          <span class="chip">Region: EU</span>
          <span class="chip">Mode: Demo</span>
          <span class="chip">Coming: Riot Login (RSO)</span>
          <span class="chip">Coming: Coach Plans</span>
        </div>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn" href="./dashboard.html">View Coach Preview</a>
        <a class="btn" href="./community.html">Community Ladder</a>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="klabel">Demo dataset</div>
        <div class="kval mono" id="kPlayers">—</div>
        <div class="kdesc">Players loaded from <code>gsi_top100.json</code> on GitHub Pages.</div>
      </div>
      <div class="card">
        <div class="klabel">Top GSI</div>
        <div class="kval mono accent" id="kTopGsi">—</div>
        <div class="kdesc">Preview metric (demo only). Full coaching metrics after opt-in login.</div>
      </div>
      <div class="card">
        <div class="klabel">Act</div>
        <div class="kval mono" id="kAct">EU (Demo)</div>
        <div class="kdesc">Official Act leaderboard is used for demo data sourcing.</div>
      </div>
    </div>

    <div class="sectionTitle">
      <h2>EU Demo Leaderboard</h2>
      <div class="small">Search + sort. Clean, data-first.</div>
    </div>

    <div class="controls">
      <div class="search">
        <span style="color:var(--muted);font-size:13px;">Search</span>
        <input id="q" placeholder="Player name or #tag…" />
      </div>
      <button class="btn" id="sortRR">Sort RR</button>
      <button class="btn" id="sortWins">Sort Wins</button>
      <button class="btn primary" id="sortGSI">Sort GSI</button>
    </div>

    <div class="tablewrap">
      <table>
        <thead>
          <tr>
            <th style="width:70px;">#</th>
            <th>Player</th>
            <th class="right" style="width:120px;">RR</th>
            <th class="right" style="width:120px;">Wins</th>
            <th class="right" style="width:140px;">GSI</th>
          </tr>
        </thead>
        <tbody id="rows">
          <tr><td colspan="5" style="padding:18px 16px;color:var(--muted)">Loading…</td></tr>
        </tbody>
      </table>
    </div>

    <div class="footer">
      <div style="margin-top:10px;">
        <a href="privacy.html" style="margin-right:14px;">Privacy Policy</a>
        <a href="terms.html">Terms of Service</a>
      </div>
      <div style="margin-top:8px;">
        AimForge is not endorsed by Riot Games. AimForge is read-only and does not interact with the game client, does not read memory, and does not bypass Vanguard.
      </div>
      <div style="margin-top:6px; opacity:.9;">
        Riot Games, VALORANT, and all associated properties are trademarks or registered trademarks of Riot Games, Inc.
      </div>
    </div>
  </div>

  <script>
    const rowsEl = document.getElementById("rows");
    const qEl = document.getElementById("q");
    const kPlayers = document.getElementById("kPlayers");
    const kTopGsi = document.getElementById("kTopGsi");
    const kAct = document.getElementById("kAct");

    let players = [];
    let sortMode = "gsi";

    function normalize(s){ return (s||"").toString().toLowerCase().trim(); }

    function render(){
      const q = normalize(qEl.value);
      let list = players.filter(p=>{
        if(!q) return true;
        const hay = normalize(`${p.gameName}#${p.tagLine} ${p.rankedRating} ${p.wins} ${p.gsi}`);
        return hay.includes(q);
      });

      list.sort((a,b)=>{
        if(sortMode==="rr") return (b.rankedRating||0)-(a.rankedRating||0);
        if(sortMode==="wins") return (b.wins||0)-(a.wins||0);
        return (b.gsi||0)-(a.gsi||0);
      });

      if(list.length === 0){
        rowsEl.innerHTML = `<tr><td colspan="5" style="padding:18px 16px;color:var(--muted)">No results.</td></tr>`;
        return;
      }

      rowsEl.innerHTML = list.map((p, idx)=>`
        <tr>
          <td class="mono" style="color:var(--muted)">${idx+1}</td>
          <td>${p.gameName}<span style="color:var(--muted)">#${p.tagLine}</span></td>
          <td class="right mono">${p.rankedRating ?? "-"}</td>
          <td class="right mono">${p.wins ?? "-"}</td>
          <td class="right mono gsi">${p.gsi ?? "-"}</td>
        </tr>
      `).join("");
    }

    async function load(){
      try{
        const res = await fetch("gsi_top100.json", { cache: "no-store" });
        if(!res.ok) throw new Error("gsi_top100.json missing");
        const data = await res.json();
        players = Array.isArray(data) ? data : (data.players || []);

        kPlayers.textContent = players.length ? players.length : "—";
        const top = players.reduce((m,p)=>Math.max(m, Number(p.gsi||0)), 0);
        kTopGsi.textContent = top ? top.toFixed(2) : "—";
        kAct.textContent = "EU (Demo)";
        render();
      }catch(e){
        rowsEl.innerHTML = `<tr><td colspan="5" style="padding:18px 16px;color:var(--muted)">
          Could not load demo data (<code>gsi_top100.json</code>).
        </td></tr>`;
        kPlayers.textContent = "—";
        kTopGsi.textContent = "—";
      }
    }

    qEl.addEventListener("input", render);
    document.getElementById("sortRR").addEventListener("click", ()=>{ sortMode="rr"; render(); });
    document.getElementById("sortWins").addEventListener("click", ()=>{ sortMode="wins"; render(); });
    document.getElementById("sortGSI").addEventListener("click", ()=>{ sortMode="gsi"; render(); });

    load();
  </script>
</body>
</html>
